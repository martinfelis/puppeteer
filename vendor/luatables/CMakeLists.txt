PROJECT ( LUATABLES )

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

LIST( APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMake )

SET_TARGET_PROPERTIES ( ${PROJECT_EXECUTABLES} PROPERTIES
		LINKER_LANGUAGE CXX
	)

# Perform the proper linking
SET (CMAKE_SKIP_BUILD_RPATH FALSE)
SET (CMAKE_BUILD_WITH_INSTALL_RPATH FALSE)
SET (CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/lib")
SET (CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)

FIND_PACKAGE (Lua51 REQUIRED)

INCLUDE_DIRECTORIES ( 
	${LUA_INCLUDE_DIR}
	src/
)

ADD_LIBRARY (luatables SHARED luatables.cc)
ADD_EXECUTABLE ( example main.cc )

SUBDIRS (
	tests/
)

TARGET_LINK_LIBRARIES (example 
	luatables
	${LUA_LIBRARIES}
	)

INSTALL ( TARGETS luatables 
	LIBRARY DESTINATION lib
	)
